(function(){"use strict";function s(e){return{startOnLoad:!1,theme:e==="dark"?"dark":"default",flowchart:{useMaxWidth:!0,htmlLabels:!0},sequence:{useMaxWidth:!0},gantt:{useMaxWidth:!0}}}function c(){if(typeof mermaid=="undefined"){console.warn("Mermaid library not loaded");return}const e=document.body.getAttribute("data-theme")||"light",r=s(e);mermaid.initialize(r),u()}const m=new Map;function u(){if(typeof mermaid=="undefined")return;document.querySelectorAll("pre.mermaid").forEach((r,a)=>{if(r.getAttribute("data-processed")!=="true")try{const n=r.textContent,i=`mermaid-diagram-${a}-${Date.now()}`;m.set(i,n);const t=document.createElement("div");t.className="mermaid-container",t.setAttribute("data-mermaid-id",i),t.setAttribute("data-processed","true"),r.parentNode.replaceChild(t,r),l(t,i,n)}catch(n){console.error("Mermaid processing error:",n)}})}function l(e,r,a){if(typeof mermaid=="undefined")return;const n=document.body.getAttribute("data-theme")||"light",i=h(a,n);mermaid.render(r,i).then(t=>{e.innerHTML=t.svg}).catch(t=>{console.error("Mermaid rendering error:",t),e.innerHTML=`<pre class="mermaid-error">Error rendering diagram: ${t.message}</pre>`})}function h(e,r){const n=r==="dark"?"dark":"default",i=new RegExp("%%\\{init:\\s*\\{.*?\\}\\s*\\}%%","s"),t=e.match(i);if(t){const d=t[0];let o=d;return d.includes("'theme'")?o=d.replace(/'theme'\s*:\s*'[^']*'/,`'theme':'${n}'`):d.includes('"theme"')?o=d.replace(/"theme"\s*:\s*"[^"]*"/,`"theme":"${n}"`):o=d.replace(/%%\{init:\s*\{/,`%%{init: {'theme':'${n}',`),e.replace(i,o)}return e}function g(){if(typeof mermaid=="undefined")return;const e=document.body.getAttribute("data-theme")||"light",r=s(e);mermaid.initialize(r),document.querySelectorAll('.mermaid-container[data-processed="true"]').forEach(n=>{const i=n.getAttribute("data-mermaid-id"),t=m.get(i);if(t){const d=`${i}-${Date.now()}`;n.innerHTML="",l(n,d,t)}})}function f(){new MutationObserver(r=>{r.forEach(a=>{a.type==="attributes"&&a.attributeName==="data-theme"&&g()})}).observe(document.body,{attributes:!0,attributeFilter:["data-theme"]})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){c(),f()}):(c(),f()),document.addEventListener("click",function(e){e.target.classList.contains("docmd-tabs-nav-item")&&setTimeout(u,100)})})();
