function initializeCollapsibleNav(){const n=document.querySelector(".sidebar-nav");if(!n)return;let o={};try{o=JSON.parse(sessionStorage.getItem("docmd-nav-states"))||{}}catch(e){}n.querySelectorAll("li.collapsible").forEach(e=>{const t=e.dataset.navId,c=e.querySelector("a"),i=e.querySelector(".submenu");if(!t||!c||!i)return;let u=e.classList.contains("active-parent")||o[t]===!0;const a=s=>{e.setAttribute("aria-expanded",s),i.style.display=s?"block":"none",o[t]=s,sessionStorage.setItem("docmd-nav-states",JSON.stringify(o))};a(u),c.addEventListener("click",s=>{const m=e.getAttribute("aria-expanded")==="true",l=c.getAttribute("href"),d=!l||l==="#"||l==="";m?(d||s.target.closest(".collapse-icon"))&&a(!1):a(!0),(d||s.target.closest(".collapse-icon"))&&s.preventDefault()})})}function initializeMobileMenus(){const n=document.querySelector(".sidebar-menu-button"),o=document.querySelector(".sidebar");n&&o&&n.addEventListener("click",r=>{r.stopPropagation(),o.classList.toggle("mobile-expanded")});const e=document.querySelector(".toc-menu-button"),t=document.querySelector(".toc-container"),c=document.querySelector(".toc-title"),i=r=>{window.getComputedStyle(e).display!=="none"&&(r.stopPropagation(),t.classList.toggle("mobile-expanded"))};e&&t&&(e.addEventListener("click",i),c&&c.addEventListener("click",i))}function initializeSidebarScroll(){const n=document.querySelector(".sidebar");n&&setTimeout(()=>{const o=n.querySelector("a.active")||n.querySelector(".active-parent > a");if(o){const e=n.getBoundingClientRect(),t=o.getBoundingClientRect();(t.top<e.top||t.bottom>e.bottom)&&o.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})}},10)}function setupThemeToggleListener(){const n=document.getElementById("theme-toggle-button");function o(e){document.documentElement.setAttribute("data-theme",e),document.body.setAttribute("data-theme",e),localStorage.setItem("docmd-theme",e);const t=document.getElementById("highlight-theme");if(t){const c=t.getAttribute("data-base-href")+`docmd-highlight-${e}.css`;t.setAttribute("href",c)}}n&&n.addEventListener("click",()=>{const t=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";o(t)})}function initializeSidebarToggle(){const n=document.getElementById("sidebar-toggle-button"),o=document.body;if(!o.classList.contains("sidebar-collapsible")||!n)return;const e=o.dataset.defaultCollapsed==="true";let t=localStorage.getItem("docmd-sidebar-collapsed");t===null?t=e:t=t==="true",t&&o.classList.add("sidebar-collapsed"),n.addEventListener("click",()=>{o.classList.toggle("sidebar-collapsed");const c=o.classList.contains("sidebar-collapsed");localStorage.setItem("docmd-sidebar-collapsed",c)})}function initializeTabs(){document.querySelectorAll(".docmd-tabs").forEach(n=>{const o=n.querySelectorAll(".docmd-tabs-nav-item"),e=n.querySelectorAll(".docmd-tab-pane");o.forEach((t,c)=>{t.addEventListener("click",()=>{o.forEach(i=>i.classList.remove("active")),e.forEach(i=>i.classList.remove("active")),t.classList.add("active"),e[c]&&e[c].classList.add("active")})})})}function initializeCopyCodeButtons(){if(document.body.dataset.copyCodeEnabled!=="true")return;const n='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg>',o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><polyline points="20 6 9 17 4 12"></polyline></svg>';document.querySelectorAll("pre").forEach(e=>{const t=e.querySelector("code");if(!t)return;const c=document.createElement("div");c.style.position="relative",c.style.display="block",e.parentNode.insertBefore(c,e),c.appendChild(e),e.style.position="static";const i=document.createElement("button");i.className="copy-code-button",i.innerHTML=n,i.setAttribute("aria-label","Copy code to clipboard"),c.appendChild(i),i.addEventListener("click",()=>{navigator.clipboard.writeText(t.innerText).then(()=>{i.innerHTML=o,i.classList.add("copied"),setTimeout(()=>{i.innerHTML=n,i.classList.remove("copied")},2e3)}).catch(r=>{console.error("Failed to copy text: ",r),i.innerText="Error"})})})}function syncBodyTheme(){const n=document.documentElement.getAttribute("data-theme");n&&document.body&&document.body.setAttribute("data-theme",n);const o=document.getElementById("highlight-theme");if(o&&n){const e=o.getAttribute("data-base-href");if(e){const t=e+`docmd-highlight-${n}.css`;o.setAttribute("href",t)}}}document.addEventListener("DOMContentLoaded",()=>{syncBodyTheme(),setupThemeToggleListener(),initializeSidebarToggle(),initializeTabs(),initializeCopyCodeButtons(),initializeCollapsibleNav(),initializeMobileMenus(),initializeSidebarScroll()});
